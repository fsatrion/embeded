apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: backend-ingress
  namespace: app-1
  annotations:
    nginx.ingress.kubernetes.io/proxy-body-size: "0"
    nginx.ingress.kubernetes.io/cors-allow-origin: "https://doamin.id"
    nginx.ingress.kubernetes.io/cors-allow-methods: "GET, POST, OPTIONS"
    nginx.ingress.kubernetes.io/cors-allow-headers: "Authorization, Content-Type"
    nginx.ingress.kubernetes.io/cors-expose-headers: "Authorization"
    nginx.ingress.kubernetes.io/use-forwarded-headers: "true"
    nginx.ingress.kubernetes.io/compute-full-forwarded-for: "true"
    nginx.ingress.kubernetes.io/real-ip-header: "X-Forwarded-For"
  labels:
    tier: backend
spec:
  ingressClassName: nginx
  rules:
    - host: domain-be.id
      http:
        paths:
        - path: /
          pathType: Prefix
          backend:
            service:
              name: aaa-service
              port:
                  number: 3000
        - path: /api/
          pathType: Prefix
          backend:
            service:
              name: bbb-service
              port:
                  number: 8080
